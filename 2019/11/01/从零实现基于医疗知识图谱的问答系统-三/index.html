<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>从零实现基于医疗知识图谱的问答系统(三)-问题解析处理 | Klaus&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="在第一篇博客和第二篇博客中，已经完成了数据的采集和知识图谱的构建，在这篇博客中将讲解问答系统的构建过程。btw，我也是第一次接触问答系统，再次感谢刘老师提供开源代码给小白学习，好人一生平安-w-">
<meta name="keywords" content="NLP,知识图谱">
<meta property="og:type" content="article">
<meta property="og:title" content="从零实现基于医疗知识图谱的问答系统(三)-问题解析处理">
<meta property="og:url" content="http://yoursite.com/2019/11/01/从零实现基于医疗知识图谱的问答系统-三/index.html">
<meta property="og:site_name" content="Klaus&#39;s Blog">
<meta property="og:description" content="在第一篇博客和第二篇博客中，已经完成了数据的采集和知识图谱的构建，在这篇博客中将讲解问答系统的构建过程。btw，我也是第一次接触问答系统，再次感谢刘老师提供开源代码给小白学习，好人一生平安-w-">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://s2.ax1x.com/2019/11/01/KHbhm4.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/11/01/KHL8RP.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/11/04/KvLH58.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/11/04/KxERTU.png">
<meta property="og:updated_time" content="2020-02-24T09:50:54.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="从零实现基于医疗知识图谱的问答系统(三)-问题解析处理">
<meta name="twitter:description" content="在第一篇博客和第二篇博客中，已经完成了数据的采集和知识图谱的构建，在这篇博客中将讲解问答系统的构建过程。btw，我也是第一次接触问答系统，再次感谢刘老师提供开源代码给小白学习，好人一生平安-w-">
<meta name="twitter:image" content="https://s2.ax1x.com/2019/11/01/KHbhm4.png">
  
    <link rel="alternate" href="/atom.xml" title="Klaus&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Klaus&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">MIA SAN MIA</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-从零实现基于医疗知识图谱的问答系统-三" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/01/从零实现基于医疗知识图谱的问答系统-三/" class="article-date">
  <time datetime="2019-11-01T02:05:04.000Z" itemprop="datePublished">2019-11-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/NLP/">NLP</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      从零实现基于医疗知识图谱的问答系统(三)-问题解析处理
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
	  <!-- Table of Contents -->
		
		  <div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ahocorasick的安装问题"><span class="toc-number">1.</span> <span class="toc-text">ahocorasick的安装问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#构建问题分类器-question-classify-py"><span class="toc-number">2.</span> <span class="toc-text">构建问题分类器-question_classify.py</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#设置加载词路径"><span class="toc-number">2.1.</span> <span class="toc-text">设置加载词路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#加载词载入list"><span class="toc-number">2.2.</span> <span class="toc-text">加载词载入list</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#构造领域actree"><span class="toc-number">2.3.</span> <span class="toc-text">构造领域actree</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#构造词对应的类型"><span class="toc-number">2.4.</span> <span class="toc-text">构造词对应的类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置问句疑问词"><span class="toc-number">2.5.</span> <span class="toc-text">设置问句疑问词</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问句过滤"><span class="toc-number">2.6.</span> <span class="toc-text">问句过滤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对问题进行分类"><span class="toc-number">2.7.</span> <span class="toc-text">对问题进行分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#测试问题分类"><span class="toc-number">2.8.</span> <span class="toc-text">测试问题分类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#问题解析器-question-parser-py"><span class="toc-number">3.</span> <span class="toc-text">问题解析器-question_parser.py</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#在Neo4j中使用查询语句"><span class="toc-number">3.1.</span> <span class="toc-text">在Neo4j中使用查询语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#构建实体节点"><span class="toc-number">3.2.</span> <span class="toc-text">构建实体节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#针对不同的问题进行sql查询"><span class="toc-number">3.3.</span> <span class="toc-text">针对不同的问题进行sql查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对问题进行解析"><span class="toc-number">3.4.</span> <span class="toc-text">对问题进行解析</span></a></li></ol></li></ol>
		  </div>
		
        <p>在第一篇博客和第二篇博客中，已经完成了数据的采集和知识图谱的构建，在这篇博客中将讲解问答系统的构建过程。<br>btw，我也是第一次接触问答系统，再次感谢刘老师提供开源代码给小白学习，好人一生平安-w-</p>
<a id="more"></a>
<h2 id="ahocorasick的安装问题"><a href="#ahocorasick的安装问题" class="headerlink" title="ahocorasick的安装问题"></a>ahocorasick的安装问题</h2><p>↓↓↓ 下面是博主本人的精分现场 ↓↓↓<br>首先介绍一下ahocorasick是什么：ahocorasick是个python模块，Aho-Corasick算法是多模式匹配中的经典算法，目前在实际应用中较多。<br>既然需要做问答，那就需要对问题先进行匹配。然而，库是非常的好的库，装上去还是有点麻烦的，下面说一下我安装过程中遇到的各种坑。</p>
<p><font color="##0099FF"><strong>Problem</strong> <strong>1</strong> <strong>不存在ahocorasick这个库</strong></font><br>exo 喵？？？不存在我怎么装？？？<br>后来我查了一下…原来改名了，叫pyahocorasick。</p>
<p><font color="##0099FF"><strong>Problem</strong> <strong>2</strong> <strong>Microsoft</strong> <strong>Visual</strong> <strong>C++</strong> <strong>14.0</strong> <strong>is</strong> <strong>required</strong></font><br>本来我以为就是改个名字的事，万万没想到啊，居然还要要求C++ 14.0这种东西…<br>行叭，let’s check check…<br>我觉得最快捷的办法就是安装一个微软的Visual Studio，刚好我的度云里有一个2013的安装包。<br>(悔啊，我电脑里原来是有Visual Studio的，后来用全家桶去了就给卸了，悔啊<br>(恕我直言，全家桶才是最好用的编译器-w-<br>分享出来，有需要自取：<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">链接：https:<span class="regexp">//</span>pan.baidu.com<span class="regexp">/s/</span><span class="number">1</span>kIX8S1X1SmYuryzS9rr6tA </span><br><span class="line">提取码：y8in</span><br></pre></td></tr></table></figure></p>
<p>你以为这样就结束了吗？这个还是继续报错，还是要求C++ 14.0…<br>我查了下这些版本的对应关系：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Visual Studio <span class="number">2013</span> ---&gt; <span class="number">12</span> </span><br><span class="line">Visual Studio <span class="number">2015</span> ---&gt; <span class="number">14</span> </span><br><span class="line">Visual Studio <span class="number">2017</span> ---&gt; <span class="number">15</span></span><br></pre></td></tr></table></figure></p>
<p>ORZ…果断卸载VS2013…</p>
<p>继续check，找到了这个：<a href="https://www.microsoft.com/en-us/download/details.aspx?id=48145" target="_blank" rel="noopener">https://www.microsoft.com/en-us/download/details.aspx?id=48145</a><br>去这里下载简体中文的VS2015，vc_redist.x64.exe，这个文件只有13.9M，下载完毕后安装。</p>
<p>你以为这样就结束了吗？这个还是继续报错，继续报错，继续报错啊！F***！！！</p>
<p>害，肿么可以随便就放弃呢？那就继续找啊0.0：<a href="https://www.scivision.dev/python-windows-visual-c-14-required/" target="_blank" rel="noopener">https://www.scivision.dev/python-windows-visual-c-14-required/</a><br><img src="https://s2.ax1x.com/2019/11/01/KHbhm4.png" alt><br>我安装了博主推荐的三个链接中的一个，这个需要等一段时间，安装包有点大，有好几个G的亚子。<br>安装完成后，我怀着受伤的(划掉)坚强的小心心再次执行了安装命令：<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 <span class="keyword">install</span> pyahocorasick</span><br></pre></td></tr></table></figure></p>
<p><img src="https://s2.ax1x.com/2019/11/01/KHL8RP.png" alt></p>
<p>看到了吗！！！！看到successful了吗！！！！额滴个神呐!(这句话请用掌柜的调来念)</p>
<p>我觉得这个库应该不止有品如的衣服，它甚至把整个品如的衣柜搬到我面前来了，安装的东西叫pyahocorasick，import的时候要把py删掉…<br>真是让人rbq的一个库啊，西湖的水啊我的泪啊QAQ…</p>
<p>安装部分完了，给看到这儿的看官推荐一首歌QAQ：<br><a href="http://music.163.com/m/song?id=461107563&amp;userid=466490903" target="_blank" rel="noopener">http://music.163.com/m/song?id=461107563&amp;userid=466490903</a></p>
<h2 id="构建问题分类器-question-classify-py"><a href="#构建问题分类器-question-classify-py" class="headerlink" title="构建问题分类器-question_classify.py"></a>构建问题分类器-question_classify.py</h2><p>这个问题下面有个deny.txt，应该是刘老师自己整理的停用词，所以这里直接拷贝到对应的 ./dict 文件夹下面。</p>
<h3 id="设置加载词路径"><a href="#设置加载词路径" class="headerlink" title="设置加载词路径"></a>设置加载词路径</h3><p>首先在 __init__下面设置特征词路径：<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 特征词路径</span></span><br><span class="line"><span class="attr">self.disease_path</span> = os.path.join(cur_dir, <span class="string">'./dict/disease.txt'</span>)</span><br><span class="line"><span class="attr">self.department_path</span> = os.path.join(cur_dir, <span class="string">'./dict/department.txt'</span>)</span><br><span class="line"><span class="attr">self.check_path</span> = os.path.join(cur_dir, <span class="string">'./dict/check.txt'</span>)</span><br><span class="line"><span class="attr">self.drug_path</span> = os.path.join(cur_dir, <span class="string">'./dict/drug.txt'</span>)</span><br><span class="line"><span class="attr">self.food_path</span> = os.path.join(cur_dir, <span class="string">'./dict/food.txt'</span>)</span><br><span class="line"><span class="attr">self.producer_path</span> = os.path.join(cur_dir, <span class="string">'./dict/producer.txt'</span>)</span><br><span class="line"><span class="attr">self.symptom_path</span> = os.path.join(cur_dir, <span class="string">'./dict/symptoms.txt'</span>)</span><br><span class="line"><span class="attr">self.deny_path</span> = os.path.join(cur_dir, <span class="string">'./dict/deny.txt'</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="加载词载入list"><a href="#加载词载入list" class="headerlink" title="加载词载入list"></a>加载词载入list</h3><p>再将对应的特征词加载到一个list中：<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 加载特征词</span><br><span class="line"><span class="keyword">self.disease_wds </span>= [i.<span class="keyword">strip() </span>for i in open(<span class="keyword">self.disease_path) </span><span class="meta">if</span> i.<span class="keyword">strip()]</span></span><br><span class="line"><span class="keyword">self.department_wds </span>= [i.<span class="keyword">strip() </span>for i in open(<span class="keyword">self.department_path) </span><span class="meta">if</span> i.<span class="keyword">strip()]</span></span><br><span class="line"><span class="keyword">self.check_wds </span>= [i.<span class="keyword">strip() </span>for i in open(<span class="keyword">self.check_path) </span><span class="meta">if</span> i.<span class="keyword">strip()]</span></span><br><span class="line"><span class="keyword">self.drug_wds </span>= [i.<span class="keyword">strip() </span>for i in open(<span class="keyword">self.drug_path) </span><span class="meta">if</span> i.<span class="keyword">strip()]</span></span><br><span class="line"><span class="keyword">self.food_wds </span>= [i.<span class="keyword">strip() </span>for i in open(<span class="keyword">self.food_path) </span><span class="meta">if</span> i.<span class="keyword">strip()]</span></span><br><span class="line"><span class="keyword">self.producer_wds </span>= [i.<span class="keyword">strip() </span>for i in open(<span class="keyword">self.producer_path) </span><span class="meta">if</span> i.<span class="keyword">strip()]</span></span><br><span class="line"><span class="keyword">self.symptom_wds </span>= [i.<span class="keyword">strip() </span>for i in open(<span class="keyword">self.symptom_path) </span><span class="meta">if</span> i.<span class="keyword">strip()]</span></span><br><span class="line"><span class="keyword">self.region_words </span>= set(<span class="keyword">self.department_wds </span>+ <span class="keyword">self.disease_wds</span></span><br><span class="line"><span class="keyword"> </span>           + <span class="keyword">self.check_wds </span>+ <span class="keyword">self.drug_wds </span>+</span><br><span class="line">            <span class="keyword">self.food_wds </span>+ <span class="keyword">self.producer_wds </span>+</span><br><span class="line">            <span class="keyword">self.symptom_wds)</span></span><br><span class="line"><span class="keyword">self.deny_words </span>= [i.<span class="keyword">strip() </span>for i in open(<span class="keyword">self.deny_path,encoding='utf-8') </span><span class="meta">if</span> i.<span class="keyword">strip()]</span></span><br></pre></td></tr></table></figure></p>
<p>这段代码需要留意 region_words 这个字段，后续需要根据其中的字段来构造领域actree。</p>
<h3 id="构造领域actree"><a href="#构造领域actree" class="headerlink" title="构造领域actree"></a>构造领域actree</h3><p>使用AC自动机来进行字符串匹配。<br>将之前得到的region_words添加到build_actree中进行构建。<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构造actree,加速过滤</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">build_actree</span><span class="params">(<span class="keyword">self</span>, wordlist)</span></span><span class="symbol">:</span></span><br><span class="line">    actree = ahocorasick.Automaton()</span><br><span class="line">    <span class="keyword">for</span> index, word <span class="keyword">in</span> enumerate(wordlist)<span class="symbol">:</span></span><br><span class="line">        actree.add_word(word, (index, word))</span><br><span class="line">    actree.make_automaton()</span><br><span class="line">    <span class="keyword">return</span> actree</span><br></pre></td></tr></table></figure></p>
<p>可以参考这篇博客来查看相关用法。</p>
<h3 id="构造词对应的类型"><a href="#构造词对应的类型" class="headerlink" title="构造词对应的类型"></a>构造词对应的类型</h3><p>做法就是定义一个字典，然后遍历region_words，再寻找其对应的类型，是厂商，还是症状，然后分类，举个栗子：<br><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">'普德药业氨酪酸注射液'</span>: [<span class="string">'producer'</span>]&#125;</span><br></pre></td></tr></table></figure></p>
<p>代码如下：<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">def build_wdtype_dict(self):</span><br><span class="line">    wd_dict = dict()</span><br><span class="line">    <span class="keyword">for</span> wd in self.region_word<span class="variable">s:</span></span><br><span class="line">        wd_dict[wd] = []</span><br><span class="line">        <span class="keyword">if</span> wd in self.disease_wd<span class="variable">s:</span></span><br><span class="line">            wd_dict[wd].<span class="keyword">append</span>(<span class="string">'disease'</span>)</span><br><span class="line">        <span class="keyword">if</span> wd in self.department_wd<span class="variable">s:</span></span><br><span class="line">            wd_dict[wd].<span class="keyword">append</span>(<span class="string">'department'</span>)</span><br><span class="line">        <span class="keyword">if</span> wd in self.check_wd<span class="variable">s:</span></span><br><span class="line">            wd_dict[wd].<span class="keyword">append</span>(<span class="string">'check'</span>)</span><br><span class="line">        <span class="keyword">if</span> wd in self.drug_wd<span class="variable">s:</span></span><br><span class="line">            wd_dict[wd].<span class="keyword">append</span>(<span class="string">'drug'</span>)</span><br><span class="line">        <span class="keyword">if</span> wd in self.food_wd<span class="variable">s:</span></span><br><span class="line">            wd_dict[wd].<span class="keyword">append</span>(<span class="string">'food'</span>)</span><br><span class="line">        <span class="keyword">if</span> wd in self.symptom_wd<span class="variable">s:</span></span><br><span class="line">            wd_dict[wd].<span class="keyword">append</span>(<span class="string">'symptom'</span>)</span><br><span class="line">        <span class="keyword">if</span> wd in self.producer_wd<span class="variable">s:</span></span><br><span class="line">            wd_dict[wd].<span class="keyword">append</span>(<span class="string">'producer'</span>)</span><br><span class="line">        #print(wd_dict)</span><br><span class="line">    <span class="keyword">return</span> wd_dict</span><br></pre></td></tr></table></figure></p>
<h3 id="设置问句疑问词"><a href="#设置问句疑问词" class="headerlink" title="设置问句疑问词"></a>设置问句疑问词</h3><p>这里的疑问词我估计是刘老师自己整理出来的，所以这里我直接引用。<br>我猜测如果后面需要自己构建这类问答系统，那么也需要我自己来构建这个问句疑问词。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">self<span class="selector-class">.symptom_qwds</span> = [<span class="string">'症状'</span>, <span class="string">'表征'</span>, <span class="string">'现象'</span>, <span class="string">'症候'</span>, <span class="string">'表现'</span>]</span><br><span class="line">self<span class="selector-class">.cause_qwds</span> = [<span class="string">'原因'</span>,<span class="string">'成因'</span>, <span class="string">'为什么'</span>, <span class="string">'怎么会'</span>, <span class="string">'怎样才'</span>, <span class="string">'咋样才'</span>, <span class="string">'怎样会'</span>, <span class="string">'如何会'</span>, <span class="string">'为啥'</span>, <span class="string">'为何'</span>, <span class="string">'如何才会'</span>, <span class="string">'怎么才会'</span>, <span class="string">'会导致'</span>, <span class="string">'会造成'</span>]</span><br><span class="line">self<span class="selector-class">.acompany_qwds</span> = [<span class="string">'并发症'</span>, <span class="string">'并发'</span>, <span class="string">'一起发生'</span>, <span class="string">'一并发生'</span>, <span class="string">'一起出现'</span>, <span class="string">'一并出现'</span>, <span class="string">'一同发生'</span>, <span class="string">'一同出现'</span>, <span class="string">'伴随发生'</span>, <span class="string">'伴随'</span>, <span class="string">'共现'</span>]</span><br><span class="line">self<span class="selector-class">.food_qwds</span> = [<span class="string">'饮食'</span>, <span class="string">'饮用'</span>, <span class="string">'吃'</span>, <span class="string">'食'</span>, <span class="string">'伙食'</span>, <span class="string">'膳食'</span>, <span class="string">'喝'</span>, <span class="string">'菜'</span> ,<span class="string">'忌口'</span>, <span class="string">'补品'</span>, <span class="string">'保健品'</span>, <span class="string">'食谱'</span>, <span class="string">'菜谱'</span>, <span class="string">'食用'</span>, <span class="string">'食物'</span>,<span class="string">'补品'</span>]</span><br><span class="line">self<span class="selector-class">.drug_qwds</span> = [<span class="string">'药'</span>, <span class="string">'药品'</span>, <span class="string">'用药'</span>, <span class="string">'胶囊'</span>, <span class="string">'口服液'</span>, <span class="string">'炎片'</span>]</span><br><span class="line">self<span class="selector-class">.prevent_qwds</span> = [<span class="string">'预防'</span>, <span class="string">'防范'</span>, <span class="string">'抵制'</span>, <span class="string">'抵御'</span>, <span class="string">'防止'</span>,<span class="string">'躲避'</span>,<span class="string">'逃避'</span>,<span class="string">'避开'</span>,<span class="string">'免得'</span>,<span class="string">'逃开'</span>,<span class="string">'避开'</span>,<span class="string">'避掉'</span>,<span class="string">'躲开'</span>,<span class="string">'躲掉'</span>,<span class="string">'绕开'</span>,</span><br><span class="line">                     <span class="string">'怎样才能不'</span>, <span class="string">'怎么才能不'</span>, <span class="string">'咋样才能不'</span>,<span class="string">'咋才能不'</span>, <span class="string">'如何才能不'</span>,</span><br><span class="line">                     <span class="string">'怎样才不'</span>, <span class="string">'怎么才不'</span>, <span class="string">'咋样才不'</span>,<span class="string">'咋才不'</span>, <span class="string">'如何才不'</span>,</span><br><span class="line">                     <span class="string">'怎样才可以不'</span>, <span class="string">'怎么才可以不'</span>, <span class="string">'咋样才可以不'</span>, <span class="string">'咋才可以不'</span>, <span class="string">'如何可以不'</span>,</span><br><span class="line">                     <span class="string">'怎样才可不'</span>, <span class="string">'怎么才可不'</span>, <span class="string">'咋样才可不'</span>, <span class="string">'咋才可不'</span>, <span class="string">'如何可不'</span>]</span><br><span class="line">self<span class="selector-class">.lasttime_qwds</span> = [<span class="string">'周期'</span>, <span class="string">'多久'</span>, <span class="string">'多长时间'</span>, <span class="string">'多少时间'</span>, <span class="string">'几天'</span>, <span class="string">'几年'</span>, <span class="string">'多少天'</span>, <span class="string">'多少小时'</span>, <span class="string">'几个小时'</span>, <span class="string">'多少年'</span>]</span><br><span class="line">self<span class="selector-class">.cureway_qwds</span> = [<span class="string">'怎么治疗'</span>, <span class="string">'如何医治'</span>, <span class="string">'怎么医治'</span>, <span class="string">'怎么治'</span>, <span class="string">'怎么医'</span>, <span class="string">'如何治'</span>, <span class="string">'医治方式'</span>, <span class="string">'疗法'</span>, <span class="string">'咋治'</span>, <span class="string">'怎么办'</span>, <span class="string">'咋办'</span>, <span class="string">'咋治'</span>]</span><br><span class="line">self<span class="selector-class">.cureprob_qwds</span> = [<span class="string">'多大概率能治好'</span>, <span class="string">'多大几率能治好'</span>, <span class="string">'治好希望大么'</span>, <span class="string">'几率'</span>, <span class="string">'几成'</span>, <span class="string">'比例'</span>, <span class="string">'可能性'</span>, <span class="string">'能治'</span>, <span class="string">'可治'</span>, <span class="string">'可以治'</span>, <span class="string">'可以医'</span>]</span><br><span class="line">self<span class="selector-class">.easyget_qwds</span> = [<span class="string">'易感人群'</span>, <span class="string">'容易感染'</span>, <span class="string">'易发人群'</span>, <span class="string">'什么人'</span>, <span class="string">'哪些人'</span>, <span class="string">'感染'</span>, <span class="string">'染上'</span>, <span class="string">'得上'</span>]</span><br><span class="line">self<span class="selector-class">.check_qwds</span> = [<span class="string">'检查'</span>, <span class="string">'检查项目'</span>, <span class="string">'查出'</span>, <span class="string">'检查'</span>, <span class="string">'测出'</span>, <span class="string">'试出'</span>]</span><br><span class="line">self<span class="selector-class">.belong_qwds</span> = [<span class="string">'属于什么科'</span>, <span class="string">'属于'</span>, <span class="string">'什么科'</span>, <span class="string">'科室'</span>]</span><br><span class="line">self<span class="selector-class">.cure_qwds</span> = [<span class="string">'治疗什么'</span>, <span class="string">'治啥'</span>, <span class="string">'治疗啥'</span>, <span class="string">'医治啥'</span>, <span class="string">'治愈啥'</span>, <span class="string">'主治啥'</span>, <span class="string">'主治什么'</span>, <span class="string">'有什么用'</span>, <span class="string">'有何用'</span>, <span class="string">'用处'</span>, <span class="string">'用途'</span>,</span><br><span class="line">                  <span class="string">'有什么好处'</span>, <span class="string">'有什么益处'</span>, <span class="string">'有何益处'</span>, <span class="string">'用来'</span>, <span class="string">'用来做啥'</span>, <span class="string">'用来作甚'</span>, <span class="string">'需要'</span>, <span class="string">'要'</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">'model init finished ......'</span>)</span></span></span><br></pre></td></tr></table></figure>
<h3 id="问句过滤"><a href="#问句过滤" class="headerlink" title="问句过滤"></a>问句过滤</h3><p>这个部分的作用是删除问句里的停用词并且建立问句里面词语及类型。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 问句过滤</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_medical</span><span class="params">(<span class="keyword">self</span>,question)</span></span><span class="symbol">:</span></span><br><span class="line">    region_wds=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="keyword">self</span>.region_tree.iter(question)<span class="symbol">:</span></span><br><span class="line">        <span class="comment"># 获取问题中在actree里面的词</span></span><br><span class="line">        wd=i[<span class="number">1</span>][<span class="number">1</span>]</span><br><span class="line">        region_wds.append(wd)</span><br><span class="line">    <span class="comment"># 建立停用词</span></span><br><span class="line">    stop_wds=[]</span><br><span class="line">    <span class="keyword">for</span> wd1 <span class="keyword">in</span> <span class="symbol">region_wds:</span></span><br><span class="line">        <span class="keyword">for</span> wd2 <span class="keyword">in</span> <span class="symbol">region_wds:</span></span><br><span class="line">            <span class="comment"># 如果wd2中包含了wd1的内容,并且wd1和wd2不同,将wd1划为停用词</span></span><br><span class="line">            <span class="keyword">if</span> wd1 <span class="keyword">in</span> wd2 <span class="keyword">and</span> wd1!=<span class="symbol">wd2:</span></span><br><span class="line">                stop_wds.append(wd1)</span><br><span class="line">    <span class="comment"># 获取去除停用词的list</span></span><br><span class="line">    final_wds=[i <span class="keyword">for</span> i <span class="keyword">in</span> region_wds <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> stop_wds]</span><br><span class="line">    <span class="comment"># 重新生成不包含停用词的物品类型dict</span></span><br><span class="line">    final_dict=&#123;<span class="symbol">i:</span><span class="keyword">self</span>.wdtype_dict.get(i) <span class="keyword">for</span> i <span class="keyword">in</span> final_wds&#125;</span><br><span class="line">    <span class="keyword">return</span> final_dict</span><br></pre></td></tr></table></figure>
<h3 id="对问题进行分类"><a href="#对问题进行分类" class="headerlink" title="对问题进行分类"></a>对问题进行分类</h3><p>这个函数的作用是通过查找问题中的关键词来给问题进行分类，使用到的相关函数已在上述内容中说明。<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对问题进行分类</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">classify</span><span class="params">(<span class="keyword">self</span>,question)</span></span><span class="symbol">:</span></span><br><span class="line">    data=&#123;&#125;</span><br><span class="line">    medical_dict=<span class="keyword">self</span>.check_medical(question)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="symbol">medical_dict:</span></span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    data[<span class="string">'args'</span>]=medical_dict</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 收集问句当中涉及到得实体类型</span></span><br><span class="line">    types=[]</span><br><span class="line">    <span class="keyword">for</span> type<span class="number">_</span> <span class="keyword">in</span> medical_dict.values()<span class="symbol">:</span></span><br><span class="line">        types+=type<span class="number">_</span></span><br><span class="line">    <span class="comment"># 定义问题类型</span></span><br><span class="line">    question_type=<span class="string">'others'</span></span><br><span class="line"></span><br><span class="line">    question_types=[]</span><br><span class="line">    <span class="comment"># 症状 : disease 对应的是疾病的名称</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.symptom_qwds,question) <span class="keyword">and</span> (<span class="string">'disease'</span> <span class="keyword">in</span> types)<span class="symbol">:</span></span><br><span class="line">        question_type=<span class="string">'disease_symptom'</span></span><br><span class="line">        question_types.append(question_type)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.symptom_qwds,question) <span class="keyword">and</span> (<span class="string">'symptom'</span> <span class="keyword">in</span> types)<span class="symbol">:</span></span><br><span class="line">        question_type = <span class="string">'symptom_disease'</span></span><br><span class="line">        question_types.append(question_type)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 原因</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.cause_qwds, question) <span class="keyword">and</span> (<span class="string">'disease'</span> <span class="keyword">in</span> types)<span class="symbol">:</span></span><br><span class="line">        question_type = <span class="string">'disease_cause'</span></span><br><span class="line">        question_types.append(question_type)</span><br><span class="line">    <span class="comment"># 并发症</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.acompany_qwds, question) <span class="keyword">and</span> (<span class="string">'disease'</span> <span class="keyword">in</span> types)<span class="symbol">:</span></span><br><span class="line">        question_type = <span class="string">'disease_acompany'</span></span><br><span class="line">        question_types.append(question_type)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 推荐食品</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.food_qwds, question) <span class="keyword">and</span> <span class="string">'disease'</span> <span class="keyword">in</span> <span class="symbol">types:</span></span><br><span class="line">        deny_status = <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.deny_words, question)</span><br><span class="line">        <span class="keyword">if</span> <span class="symbol">deny_status:</span></span><br><span class="line">            question_type = <span class="string">'disease_not_food'</span></span><br><span class="line">        <span class="symbol">else:</span></span><br><span class="line">            question_type = <span class="string">'disease_do_food'</span></span><br><span class="line">        question_types.append(question_type)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 已知食物找疾病</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.food_qwds + <span class="keyword">self</span>.cure_qwds, question) <span class="keyword">and</span> <span class="string">'food'</span> <span class="keyword">in</span> <span class="symbol">types:</span></span><br><span class="line">        deny_status = <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.deny_words, question)</span><br><span class="line">        <span class="keyword">if</span> <span class="symbol">deny_status:</span></span><br><span class="line">            question_type = <span class="string">'food_not_disease'</span></span><br><span class="line">        <span class="symbol">else:</span></span><br><span class="line">            question_type = <span class="string">'food_do_disease'</span></span><br><span class="line">        question_types.append(question_type)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 推荐药品</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.drug_qwds, question) <span class="keyword">and</span> <span class="string">'disease'</span> <span class="keyword">in</span> <span class="symbol">types:</span></span><br><span class="line">        question_type = <span class="string">'disease_drug'</span></span><br><span class="line">        question_types.append(question_type)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 药品治啥病</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.cure_qwds, question) <span class="keyword">and</span> <span class="string">'drug'</span> <span class="keyword">in</span> <span class="symbol">types:</span></span><br><span class="line">        question_type = <span class="string">'drug_disease'</span></span><br><span class="line">        question_types.append(question_type)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 疾病接受检查项目</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.check_qwds, question) <span class="keyword">and</span> <span class="string">'disease'</span> <span class="keyword">in</span> <span class="symbol">types:</span></span><br><span class="line">        question_type = <span class="string">'disease_check'</span></span><br><span class="line">        question_types.append(question_type)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 已知检查项目查相应疾病</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.check_qwds + <span class="keyword">self</span>.cure_qwds, question) <span class="keyword">and</span> <span class="string">'check'</span> <span class="keyword">in</span> <span class="symbol">types:</span></span><br><span class="line">        question_type = <span class="string">'check_disease'</span></span><br><span class="line">        question_types.append(question_type)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 　症状防御</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.prevent_qwds, question) <span class="keyword">and</span> <span class="string">'disease'</span> <span class="keyword">in</span> <span class="symbol">types:</span></span><br><span class="line">        question_type = <span class="string">'disease_prevent'</span></span><br><span class="line">        question_types.append(question_type)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 疾病医疗周期</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.lasttime_qwds, question) <span class="keyword">and</span> <span class="string">'disease'</span> <span class="keyword">in</span> <span class="symbol">types:</span></span><br><span class="line">        question_type = <span class="string">'disease_lasttime'</span></span><br><span class="line">        question_types.append(question_type)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 疾病治疗方式</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.cureway_qwds, question) <span class="keyword">and</span> <span class="string">'disease'</span> <span class="keyword">in</span> <span class="symbol">types:</span></span><br><span class="line">        question_type = <span class="string">'disease_cureway'</span></span><br><span class="line">        question_types.append(question_type)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 疾病治愈可能性</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.cureprob_qwds, question) <span class="keyword">and</span> <span class="string">'disease'</span> <span class="keyword">in</span> <span class="symbol">types:</span></span><br><span class="line">        question_type = <span class="string">'disease_cureprob'</span></span><br><span class="line">        question_types.append(question_type)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 疾病易感染人群</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">self</span>.check_words(<span class="keyword">self</span>.easyget_qwds, question) <span class="keyword">and</span> <span class="string">'disease'</span> <span class="keyword">in</span> <span class="symbol">types:</span></span><br><span class="line">        question_type = <span class="string">'disease_easyget'</span></span><br><span class="line">        question_types.append(question_type)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 若没有查到相关的外部查询信息，那么则将该疾病的描述信息返回</span></span><br><span class="line">    <span class="keyword">if</span> question_types == [] <span class="keyword">and</span> <span class="string">'disease'</span> <span class="keyword">in</span> <span class="symbol">types:</span></span><br><span class="line">        question_types = [<span class="string">'disease_desc'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 若没有查到相关的外部查询信息，那么则将该疾病的描述信息返回</span></span><br><span class="line">    <span class="keyword">if</span> question_types == [] <span class="keyword">and</span> <span class="string">'symptom'</span> <span class="keyword">in</span> <span class="symbol">types:</span></span><br><span class="line">        question_types = [<span class="string">'symptom_disease'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将多个分类结果进行合并处理，组装成一个字典</span></span><br><span class="line">    data[<span class="string">'question_types'</span>] = question_types</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data</span><br></pre></td></tr></table></figure></p>
<p>完整的question_classifier.py文件这里就不再放出，后面会直接上传到github上，同时会在目录博客中说明。</p>
<h3 id="测试问题分类"><a href="#测试问题分类" class="headerlink" title="测试问题分类"></a>测试问题分类</h3><p>首先把程序运行起来，根据提示进行输入:<br><img src="https://s2.ax1x.com/2019/11/04/KvLH58.png" alt></p>
<h2 id="问题解析器-question-parser-py"><a href="#问题解析器-question-parser-py" class="headerlink" title="问题解析器-question_parser.py"></a>问题解析器-question_parser.py</h2><h3 id="在Neo4j中使用查询语句"><a href="#在Neo4j中使用查询语句" class="headerlink" title="在Neo4j中使用查询语句"></a>在Neo4j中使用查询语句</h3><p>在阐述这个python文件之前，还需要补一下Neo4j中的查询语句，否则无法进行查询-v-<br>首先，启动Neo4j进入浏览器主界面：localhost:7474<br>先执行这样一条查询语句：<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH (m:Disease) <span class="keyword">where</span> m<span class="built_in">.name</span> = <span class="string">'感冒'</span> <span class="keyword">return</span> m<span class="built_in">.name</span>, m.cause</span><br></pre></td></tr></table></figure></p>
<p>可以看到已经得到了我们的查询结果：<br><img src="https://s2.ax1x.com/2019/11/04/KxERTU.png" alt></p>
<p>同时也可以查询感冒的治愈率，预防方式，治疗周期等等。</p>
<p>妥，下面来系统的看一下Neo4j的查询语句，CQL。<br>(虽然这个在构建知识图谱那一章就该讲的但是那里用到得不多所以偷了个懒，害，写在这里也是一样的嘛-v-</p>
<p>本来一开始是写在这里的，然鹅我觉得这么写感觉以后我要翻回来看看也不是hin方便，那还是单独再开一篇博客吧，戳下面↓↓↓<br><a href="http://klausvon.cn/2019/11/04/Neo4j%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E6%80%BB%E7%BB%93-v/" target="_blank" rel="noopener">Neo4j图数据库查询语句总结</a></p>
<h3 id="构建实体节点"><a href="#构建实体节点" class="headerlink" title="构建实体节点"></a>构建实体节点</h3><p>返回实体节点及其类型，具体写在代码注释上:<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构建实体节点</span></span><br><span class="line">def build_entitydict(self,args):</span><br><span class="line">    entity_dict=&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> arg,types <span class="keyword">in</span> args.items():</span><br><span class="line">        <span class="keyword">for</span><span class="built_in"> type </span><span class="keyword">in</span> types:</span><br><span class="line">            <span class="keyword">if</span><span class="built_in"> type </span><span class="keyword">not</span> <span class="keyword">in</span> entity_dict:</span><br><span class="line">                entity_dict[type]=[arg]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                entity_dict[type].append(arg)</span><br><span class="line">    # 返回的数据类型类似于:&#123;<span class="string">'food'</span>: [<span class="string">'白菜'</span>]&#125;,如果类型不止一种则继续增加</span><br><span class="line">    return entity_dict</span><br></pre></td></tr></table></figure></p>
<h3 id="针对不同的问题进行sql查询"><a href="#针对不同的问题进行sql查询" class="headerlink" title="针对不同的问题进行sql查询"></a>针对不同的问题进行sql查询</h3><p>这个函数主要是构造CQL查询语句的，熟悉CQL查询就行，问题不大。<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 针对不同的问题进行sql查询</span></span><br><span class="line">def sql_transfer(self, question_type, entities):</span><br><span class="line">    <span class="comment"># 如果不存在实体,返回空</span></span><br><span class="line">    <span class="keyword">if</span> not entities:</span><br><span class="line">        return []</span><br><span class="line">    <span class="comment"># 查询语句</span></span><br><span class="line">    <span class="attr">sql</span> = []</span><br><span class="line">    <span class="comment"># 查询疾病的原因</span></span><br><span class="line">    <span class="keyword">if</span> <span class="attr">question_type</span> == 'disease_cause':</span><br><span class="line">        <span class="attr">sql</span> = [<span class="string">"MATCH (m:Disease) where m.name = '&#123;0&#125;' return m.name, m.cause"</span>.format(i) for i <span class="keyword">in</span> entities]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询疾病的防御措施</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'disease_prevent':</span><br><span class="line">        <span class="attr">sql</span> = [<span class="string">"MATCH (m:Disease) where m.name = '&#123;0&#125;' return m.name, m.prevent"</span>.format(i) for i <span class="keyword">in</span> entities]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询疾病的持续时间</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'disease_lasttime':</span><br><span class="line">        <span class="attr">sql</span> = [<span class="string">"MATCH (m:Disease) where m.name = '&#123;0&#125;' return m.name, m.cure_lasttime"</span>.format(i) for i <span class="keyword">in</span> entities]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询疾病的治愈概率</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'disease_cureprob':</span><br><span class="line">        <span class="attr">sql</span> = [<span class="string">"MATCH (m:Disease) where m.name = '&#123;0&#125;' return m.name, m.cured_prob"</span>.format(i) for i <span class="keyword">in</span> entities]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询疾病的治疗方式</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'disease_cureway':</span><br><span class="line">        <span class="attr">sql</span> = [<span class="string">"MATCH (m:Disease) where m.name = '&#123;0&#125;' return m.name, m.cure_way"</span>.format(i) for i <span class="keyword">in</span> entities]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询疾病的易发人群</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'disease_easyget':</span><br><span class="line">        <span class="attr">sql</span> = [<span class="string">"MATCH (m:Disease) where m.name = '&#123;0&#125;' return m.name, m.easy_get"</span>.format(i) for i <span class="keyword">in</span> entities]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询疾病的相关介绍</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'disease_desc':</span><br><span class="line">        <span class="attr">sql</span> = [<span class="string">"MATCH (m:Disease) where m.name = '&#123;0&#125;' return m.name, m.desc"</span>.format(i) for i <span class="keyword">in</span> entities]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询疾病有哪些症状</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'disease_symptom':</span><br><span class="line">        <span class="attr">sql</span> = [<span class="string">"MATCH (m:Disease)-[r:has_symptom]-&gt;(n:Symptom) where m.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(</span><br><span class="line">                i) for i <span class="keyword">in</span> entities]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询症状会导致哪些疾病</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'symptom_disease':</span><br><span class="line">        <span class="attr">sql</span> = [<span class="string">"MATCH (m:Disease)-[r:has_symptom]-&gt;(n:Symptom) where n.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(</span><br><span class="line">                i) for i <span class="keyword">in</span> entities]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询疾病的并发症</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'disease_acompany':</span><br><span class="line">        <span class="attr">sql1</span> = [<span class="string">"MATCH (m:Disease)-[r:acompany_with]-&gt;(n:Disease) where m.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(</span><br><span class="line">                i) for i <span class="keyword">in</span> entities]</span><br><span class="line">        <span class="attr">sql2</span> = [<span class="string">"MATCH (m:Disease)-[r:acompany_with]-&gt;(n:Disease) where n.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(</span><br><span class="line">                i) for i <span class="keyword">in</span> entities]</span><br><span class="line">        <span class="attr">sql</span> = sql1 + sql2</span><br><span class="line">    <span class="comment"># 查询疾病的忌口</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'disease_not_food':</span><br><span class="line">        <span class="attr">sql</span> = [<span class="string">"MATCH (m:Disease)-[r:no_eat]-&gt;(n:Food) where m.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(i)</span><br><span class="line">               for i <span class="keyword">in</span> entities]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询疾病建议吃的东西</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'disease_do_food':</span><br><span class="line">        <span class="attr">sql1</span> = [<span class="string">"MATCH (m:Disease)-[r:do_eat]-&gt;(n:Food) where m.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(i)</span><br><span class="line">            for i <span class="keyword">in</span> entities]</span><br><span class="line">        <span class="attr">sql2</span> = [<span class="string">"MATCH (m:Disease)-[r:recommand_eat]-&gt;(n:Food) where m.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(</span><br><span class="line">                i) for i <span class="keyword">in</span> entities]</span><br><span class="line">        <span class="attr">sql</span> = sql1 + sql2</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 已知忌口查疾病</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'food_not_disease':</span><br><span class="line">        <span class="attr">sql</span> = [<span class="string">"MATCH (m:Disease)-[r:no_eat]-&gt;(n:Food) where n.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(i)</span><br><span class="line">               for i <span class="keyword">in</span> entities]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 已知推荐查疾病</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'food_do_disease':</span><br><span class="line">        <span class="attr">sql1</span> = [ <span class="string">"MATCH (m:Disease)-[r:do_eat]-&gt;(n:Food) where n.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(i)</span><br><span class="line">            for i <span class="keyword">in</span> entities]</span><br><span class="line">        <span class="attr">sql2</span> = [<span class="string">"MATCH (m:Disease)-[r:recommand_eat]-&gt;(n:Food) where n.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(</span><br><span class="line">                i) for i <span class="keyword">in</span> entities]</span><br><span class="line">        <span class="attr">sql</span> = sql1 + sql2</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询疾病常用药品－药品别名记得扩充</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'disease_drug':</span><br><span class="line">        <span class="attr">sql1</span> = [<span class="string">"MATCH (m:Disease)-[r:common_drug]-&gt;(n:Drug) where m.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(</span><br><span class="line">                i) for i <span class="keyword">in</span> entities]</span><br><span class="line">        <span class="attr">sql2</span> = [<span class="string">"MATCH (m:Disease)-[r:recommand_drug]-&gt;(n:Drug) where m.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(</span><br><span class="line">                i) for i <span class="keyword">in</span> entities]</span><br><span class="line">        <span class="attr">sql</span> = sql1 + sql2</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 已知药品查询能够治疗的疾病</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'drug_disease':</span><br><span class="line">        <span class="attr">sql1</span> = [<span class="string">"MATCH (m:Disease)-[r:common_drug]-&gt;(n:Drug) where n.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(</span><br><span class="line">                i) for i <span class="keyword">in</span> entities]</span><br><span class="line">        <span class="attr">sql2</span> = [<span class="string">"MATCH (m:Disease)-[r:recommand_drug]-&gt;(n:Drug) where n.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(</span><br><span class="line">                i) for i <span class="keyword">in</span> entities]</span><br><span class="line">        <span class="attr">sql</span> = sql1 + sql2</span><br><span class="line">    <span class="comment"># 查询疾病应该进行的检查</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'disease_check':</span><br><span class="line">        <span class="attr">sql</span> = [<span class="string">"MATCH (m:Disease)-[r:need_check]-&gt;(n:Check) where m.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(</span><br><span class="line">                i) for i <span class="keyword">in</span> entities]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 已知检查查询疾病</span></span><br><span class="line">    elif <span class="attr">question_type</span> == 'check_disease':</span><br><span class="line">        <span class="attr">sql</span> = [<span class="string">"MATCH (m:Disease)-[r:need_check]-&gt;(n:Check) where n.name = '&#123;0&#125;' return m.name, r.name, n.name"</span>.format(</span><br><span class="line">                i) for i <span class="keyword">in</span> entities]</span><br><span class="line"></span><br><span class="line">    return sql</span><br></pre></td></tr></table></figure></p>
<h3 id="对问题进行解析"><a href="#对问题进行解析" class="headerlink" title="对问题进行解析"></a>对问题进行解析</h3><p>害，这个也是，都写在代码注释里了，不再赘述，主要作用是将问题转换为sql并返回查询结果。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解析主函数</span></span><br><span class="line">def parser_main(self, res_classify):</span><br><span class="line">    <span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">    后续这个文件要在chat_bot中进行查询使用</span></span><br><span class="line"><span class="string">    这里的参数 res_classify,来自于question_classifier.py中def classify的结果</span></span><br><span class="line"><span class="string">    结果形式:&#123;'</span>args<span class="string">': &#123;'</span>白菜<span class="string">': ['</span>food<span class="string">']&#125;, '</span>question_types<span class="string">': ['</span>food_do_disease<span class="string">']&#125;</span></span><br><span class="line"><span class="string">    args包括的是实体名称和实体类型</span></span><br><span class="line"><span class="string">    question_types则是疾病宜吃的食物</span></span><br><span class="line"><span class="string">    '</span><span class="string">''</span></span><br><span class="line">    # 获取实体及实体类型</span><br><span class="line">    args = res_classify[<span class="string">'args'</span>]</span><br><span class="line">    # 构建实体字典</span><br><span class="line">    entity_dict = self.build_entitydict(args)</span><br><span class="line">    # 获取关系类型</span><br><span class="line">    question_types = res_classify[<span class="string">'question_types'</span>]</span><br><span class="line">    sqls = []</span><br><span class="line">    <span class="keyword">for</span> question_type <span class="keyword">in</span> question_types:</span><br><span class="line">        sql_ = &#123;&#125;</span><br><span class="line">        sql_[<span class="string">'question_type'</span>] = question_type</span><br><span class="line">        sql = []</span><br><span class="line">        <span class="keyword">if</span> question_type == <span class="string">'disease_symptom'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'disease'</span>))</span><br><span class="line">        elif question_type == <span class="string">'symptom_disease'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'symptom'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'disease_cause'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'disease'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'disease_acompany'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'disease'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'disease_not_food'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'disease'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'disease_do_food'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'disease'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'food_not_disease'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'food'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'food_do_disease'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'food'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'disease_drug'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'disease'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'drug_disease'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'drug'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'disease_check'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'disease'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'check_disease'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'check'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'disease_prevent'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'disease'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'disease_lasttime'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'disease'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'disease_cureway'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'disease'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'disease_cureprob'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'disease'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'disease_easyget'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'disease'</span>))</span><br><span class="line"></span><br><span class="line">        elif question_type == <span class="string">'disease_desc'</span>:</span><br><span class="line">            sql = self.sql_transfer(question_type, entity_dict.<span class="builtin-name">get</span>(<span class="string">'disease'</span>))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> sql:</span><br><span class="line">            sql_[<span class="string">'sql'</span>] = sql</span><br><span class="line"></span><br><span class="line">            sqls.append(sql_)</span><br><span class="line"></span><br><span class="line">    return sqls</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/11/01/从零实现基于医疗知识图谱的问答系统-三/" data-id="cktfedoyw005sf4ukedgrpyc8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NLP/">NLP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/知识图谱/">知识图谱</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/11/04/Neo4j数据库查询语句总结-v/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Neo4j数据库查询语句总结-v-
        
      </div>
    </a>
  
  
    <a href="/2019/10/29/从零实现基于医疗知识图谱的问答系统-二/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">从零实现基于医疗知识图谱的问答系统(二)-Neo4j构建知识图谱</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
    <h3 class="widget-title">联系方式</h3>
    <div class="widget">
	  <li><a>klausvon@163.com</a></li>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">目录</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CTF/">CTF</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/">HTML</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/NLP/">NLP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/NLP-知识图谱/">NLP,知识图谱</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/VQA/">VQA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/XSS漏洞学习/">XSS漏洞学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/代码审计/">代码审计</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/开发/">开发</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数学学习/">数学学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/漏洞学习/">漏洞学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/环境配置/">环境配置</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/神经网络/">神经网络</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CTF-Web/">CTF_Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ML/">ML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Model-Compression/">Model Compression</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NLP/">NLP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL-injection/">SQL_injection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VQA/">VQA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XXE/">XXE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/凸包算法/">凸包算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/大数据/">大数据</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开发/">开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数学学习/">数学学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据挖掘/">数据挖掘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/环境配置/">环境配置</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/知识图谱/">知识图谱</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/神经网络/">神经网络</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Algorithm/" style="font-size: 14.29px;">Algorithm</a> <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/CTF-Web/" style="font-size: 18.57px;">CTF_Web</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/ML/" style="font-size: 11.43px;">ML</a> <a href="/tags/Model-Compression/" style="font-size: 10px;">Model Compression</a> <a href="/tags/NLP/" style="font-size: 20px;">NLP</a> <a href="/tags/PHP/" style="font-size: 10px;">PHP</a> <a href="/tags/Python/" style="font-size: 11.43px;">Python</a> <a href="/tags/SQL-injection/" style="font-size: 12.86px;">SQL_injection</a> <a href="/tags/VQA/" style="font-size: 10px;">VQA</a> <a href="/tags/XXE/" style="font-size: 10px;">XXE</a> <a href="/tags/凸包算法/" style="font-size: 10px;">凸包算法</a> <a href="/tags/大数据/" style="font-size: 10px;">大数据</a> <a href="/tags/开发/" style="font-size: 18.57px;">开发</a> <a href="/tags/数学学习/" style="font-size: 11.43px;">数学学习</a> <a href="/tags/数据挖掘/" style="font-size: 11.43px;">数据挖掘</a> <a href="/tags/环境配置/" style="font-size: 10px;">环境配置</a> <a href="/tags/知识图谱/" style="font-size: 17.14px;">知识图谱</a> <a href="/tags/神经网络/" style="font-size: 15.71px;">神经网络</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/07/31/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/06/03/Basic-Understanding-of-Optimization/">Basic Understanding of Optimization</a>
          </li>
        
          <li>
            <a href="/2021/06/02/Why-Deep-Structure/">Why Deep Structure</a>
          </li>
        
          <li>
            <a href="/2021/05/23/Model-Compression-基本概念/">What is Model Compression</a>
          </li>
        
          <li>
            <a href="/2020/05/21/CSS在开发中的基本操作小结/">CSS在开发中的基本操作小结</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
	 <a class="theme-link"  href="https://mteacher.top/"> martini's blog </a><span>&nbsp;&nbsp;</span>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Klaus<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>